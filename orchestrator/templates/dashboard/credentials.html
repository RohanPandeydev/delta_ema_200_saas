{% extends "base.html" %} {% block title %}Credentials - Trading Bot Platform{%
endblock %} {% block content %}
<div class="container">
  <div class="dashboard-header">
    <h1>üîë API Credentials</h1>
    <p>Manage your exchange API keys securely</p>
  </div>

  <div class="nav">
    <a href="{{ url_for('dashboard.index') }}">Dashboard</a>
    <a href="{{ url_for('credentials.index') }}" class="active"
      >Manage Credentials</a
    >
  </div>

  <div class="card">
    <h2>Add New Credential</h2>
    <form method="POST" action="{{ url_for('credentials.add') }}">
      <div class="grid">
        <div class="form-group">
          <label>Exchange Name</label>
          <select name="exchange_name" class="form-control" required>
            <option value="delta">Delta Exchange</option>
            <option value="binance">Binance</option>
            <option value="other">Other</option>
          </select>
        </div>

        <div class="form-group">
          <label>Symbol</label>
          <input
            type="text"
            name="symbol"
            class="form-control"
            value="BTCUSD"
            required
          />
        </div>

        <div class="form-group">
          <label>Lot Size</label>
          <input
            type="number"
            name="lot_size"
            class="form-control"
            value="60"
            step="0.01"
            required
          />
        </div>

        <div class="form-group">
          <label>Timeframe (minutes)</label>
          <input
            type="number"
            name="timeframe"
            class="form-control"
            value="15"
            required
          />
        </div>
      </div>

      <div class="form-group">
        <label>API Key</label>
        <input type="text" name="api_key" class="form-control" required />
      </div>

      <div class="form-group">
        <label>API Secret</label>
        <input
          type="password"
          name="api_secret"
          class="form-control"
          required
        />
      </div>

      <div class="grid">
        <div class="form-group">
          <label>Telegram Bot Token (Optional)</label>
          <input type="text" name="telegram_bot_token" class="form-control" />
        </div>

        <div class="form-group">
          <label>Telegram Chat ID (Optional)</label>
          <input
            type="text"
            name="telegram_chat_id"
            class="form-control"
            value="1676125045"
          />
        </div>
      </div>

      <button type="submit" class="btn btn-success">üíæ Save Credential</button>
    </form>
  </div>

  <div class="card">
    <h2>Your Credentials</h2>

    {% if credentials %}
    <table class="table">
      <thead>
        <tr>
          <th>Exchange</th>
          <th>Symbol</th>
          <th>Lot Size</th>
          <th>Timeframe</th>
          <th>Created</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        {% for cred in credentials %}
        <tr>
          <td>{{ cred.exchange_name|upper }}</td>
          <td>{{ cred.symbol }}</td>
          <td>{{ cred.lot_size }}</td>
          <td>{{ cred.timeframe }}m</td>
          <td>{{ cred.created_at.strftime('%Y-%m-%d') }}</td>
          <td>
            <form
              method="POST"
              action="{{ url_for('credentials.start_bot', cred_id=cred.id) }}"
              style="display: inline"
            >
              <button type="submit" class="btn btn-success btn-sm">
                ‚ñ∂Ô∏è Start Bot
              </button>
            </form>

            <form
              method="POST"
              action="{{ url_for('credentials.delete', cred_id=cred.id) }}"
              style="display: inline"
            >
              <button
                type="submit"
                class="btn btn-danger btn-sm"
                onclick="return confirm('Delete this credential?')"
              >
                üóëÔ∏è Delete
              </button>
            </form>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
    {% else %}
    <p style="color: #666; text-align: center; padding: 40px">
      No credentials added yet. Add one above to get started!
    </p>
    {% endif %}
  </div>
</div>
{% endblock %}
